<div class="flex justify-center items-center min-h-[80vh] p-6">
  <div
    class="bg-white shadow-2xl rounded-2xl w-full max-w-2xl border border-gray-100 p-8 animate-fade-in"
  >
    <div class="border-b pb-4 mb-6">
      <h2 class="text-2xl font-semibold text-gray-800">
        {{ editing ? "Editar Cliente" : "Registrar Cliente" }}
      </h2>
      <p class="text-gray-500 text-sm mt-1">
        {{ editing 
          ? 'Completa los campos para actualizar los datos del cliente.'
          : 'Completa los campos para crear un nuevo cliente y usuario.'
        }}
      </p>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">
      
      <div *ngIf="!editing" class="grid grid-cols-1 sm:grid-cols-2 gap-8">
        <div>
          <label class="block text-sm text-gray-600 mb-1">Nombre de Usuario</label>
          <input
            pInputText
            formControlName="username"
            placeholder="Ej. juan.lopez"
            class="w-full"
          />
          <small class="text-red-500" *ngIf="form.get('username')?.invalid && form.get('username')?.touched">
            Requerido (mín. 3 caracteres)
          </small>
        </div>

        <div>
          <label class="block text-sm text-gray-600 mb-1">Contraseña</label>
          <p-password
            formControlName="password"
            placeholder="Contraseña inicial"
            [toggleMask]="true"
            styleClass="w-full"
            inputStyleClass="w-full"
          ></p-password>
           <small class="text-red-500" *ngIf="form.get('password')?.invalid && form.get('password')?.touched">
            Requerido (mín. 8 caracteres)
          </small>
        </div>
      </div>
      
      <div *ngIf="editing">
          <label class="block text-sm text-gray-600 mb-1">Nombre de Usuario</label>
          <input
            pInputText
            formControlName="username"
            class="w-full bg-gray-100 cursor-not-allowed"
            [readonly]="true"
          />
          <small class="text-gray-400 text-xs">
            El nombre de usuario no se puede modificar.
          </small>
        </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
        <div>
          <label class="block text-sm text-gray-600 mb-1">Nombre</label>
          <input
            pInputText
            formControlName="firstName"
            placeholder="Ej. Juan"
            class="w-full"
          />
           <small class="text-red-500" *ngIf="form.get('firstName')?.invalid && form.get('firstName')?.touched">
            Nombre requerido
          </small>
        </div>

        <div>
          <label class="block text-sm text-gray-600 mb-1">Apellido</label>
          <input
            pInputText
            formControlName="lastName"
            placeholder="Ej. López"
            class="w-full"
          />
           <small class="text-red-500" *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched">
            Apellido requerido
          </small>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
        <div>
          <label class="block text-sm text-gray-600 mb-1"
            >Correo electrónico</label
          >
          <input
            pInputText
            formControlName="email"
            placeholder="cliente@correo.com"
            class="w-full"
            [readonly]="false" 
          />
          <small class="text-red-500" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
            Email inválido o requerido
          </small>
        </div>

        <div>
          <label class="block text-sm text-gray-600 mb-1">Teléfono</label>
          <input
            pInputText
            formControlName="phone"
            placeholder="Ej. +51 999 999 999"
            class="w-full"
          />
        </div>
      </div>
      
      <div class="flex justify-end gap-3 pt-4 border-t mt-6">
        <button
          pButton
          type="button"
          label="Cancelar"
          icon="pi pi-arrow-left"
          class="p-button-outlined"
          (click)="goBack()"
        ></button>

        <button
          pButton
          type="submit"
          [label]="editing ? 'Actualizar' : 'Guardar'"
          icon="pi pi-save"
          class="p-button-primary"
          [disabled]="form.invalid"
        ></button>
      </div>
    </form>
  </div>
</div>