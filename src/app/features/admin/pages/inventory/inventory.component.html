<div class="p-6 space-y-10">
  <div class="mb-6 flex justify-between">
    <h2 class="text-3xl font-bold mb-6">🍴 Inventario del Restaurante</h2>

    <p-button
      label="Registrar nuevo inventario"
      icon="pi pi-plus"
      severity="success"
      [rounded]="true"
      [raised]="true"
    ></p-button>
  </div>

  <ng-container *ngIf="inventories.length === 0; else tableSection">
    <div
      class="flex flex-col items-center justify-center bg-gray-50 border border-dashed border-gray-300 rounded-lg p-10 text-center shadow-sm"
    >
      <i class="pi pi-box text-6xl text-gray-400 mb-4"></i>
      <h3 class="text-lg font-semibold text-gray-700">
        No hay productos registrados en el inventario
      </h3>
      <p class="text-gray-500 mt-1 mb-4">
        Agrega los ingredientes y productos para comenzar a gestionarlos.
      </p>
    </div>
  </ng-container>

  <ng-template #tableSection>
    <p-table
      [value]="inventories"
      class="shadow-xl rounded-xl overflow-hidden"
      [tableStyle]="{ 'min-width': '50rem' }"
      [rows]="10"
      [paginator]="true"
      [rowsPerPageOptions]="[5, 10, 20]"
    >
      <ng-template pTemplate="header">
        <tr class="bg-gray-100">
          <th class="text-left p-3">#</th>
          <th class="text-left p-3">Ingrediente</th>
          <th class="text-left p-3">Unidad</th>
          <th class="text-center p-3">Stock</th>
          <th class="text-center p-3">Símbolo</th>
          <th class="text-center p-3">Mínimo Requerido</th>
          <th class="text-center p-3">Acciones</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-item>
        <tr class="hover:bg-gray-50">
          <td class="p-3">{{ item.id }}</td>
          <td class="p-3 font-medium text-gray-800">
            {{ item.ingredientName }}
          </td>
          <td class="p-3 text-gray-600">{{ item.unitName }}</td>
          <td class="text-center p-3">
            <span
              class="px-3 py-1 rounded-full text-xs font-semibold"
              [ngClass]="getStockBadgeClass(item)"
            >
              {{ item.currentStock }}
            </span>
          </td>
          <td class="text-center p-3">{{ item.unitSymbol }}</td>
          <td class="text-center p-3">{{ item.minimumStock }}</td>
          <td class="text-center space-x-2 p-3">
            <p-button
              icon="pi pi-search"
              pTooltip="Ver detalle"
              [rounded]="true"
              severity="secondary"
              [raised]="true"
              size="small"
              (click)="viewItem(item)"
            />
            <p-button
              icon="pi pi-plus-circle"
              pTooltip="Ajustar stock"
              [rounded]="true"
              size="small"
              [raised]="true"
              severity="success"
              (click)="orderMore(item)"
            />
            <p-button
              icon="pi pi-history"
              pTooltip="Ver historial"
              [rounded]="true"
              size="small"
              [raised]="true"
              severity="help"
              (click)="orderMore(item)"
            />
            <p-button
              icon="pi pi-pencil"
              pTooltip="Editar"
              [rounded]="true"
              size="small"
              [raised]="true"
              severity="info"
              (click)="orderMore(item)"
            />
            <p-button
              icon="pi pi-trash"
              pTooltip="Eliminar"
              [rounded]="true"
              size="small"
              [raised]="true"
              severity="danger"
              (click)="orderMore(item)"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>

    <!-- Sección de gráficas -->
    <div class="grid gap-8 md:grid-cols-2 mt-12">
      <div class="bg-white rounded-2xl shadow-md p-6">
        <h3 class="font-semibold text-lg mb-6">📦 Ingredientes por unidad</h3>
        <p-chart
          type="pie"
          [data]="categoryChartData"
          [options]="chartOptions"
          style="max-height: 320px"
        ></p-chart>
      </div>

      <div class="bg-white rounded-2xl shadow-md p-6">
        <h3 class="font-semibold text-lg mb-6">
          📊 Estado del inventario por ingrediente
        </h3>
        <p-chart
          type="bar"
          [data]="categoryChartData"
          [options]="chartOptions"
          height="320"
        ></p-chart>
      </div>
    </div>
  </ng-template>
</div>
