<div class="p-6 space-y-6">
  <h2 class="text-3xl font-bold mb-6">ðŸ“… Reservaciones del Restaurante</h2>

  <div class="grid lg:grid-cols-3 gap-6">
    <!-- Calendario -->
    <div class="lg:col-span-2 border rounded-lg p-4 shadow-lg bg-white">
      <div class="flex justify-between items-center mb-4">
        <div class="flex gap-1">
          <button class="p-2 bg-gray-200 rounded" (click)="changeYear(-1)">
            Â« AÃ±o
          </button>
          <button class="p-2 bg-gray-200 rounded" (click)="changeMonth(-1)">
            â€¹ Mes
          </button>
        </div>
        <span class="font-semibold">{{
          currentMonth | date : "MMMM yyyy"
        }}</span>
        <div class="flex gap-1">
          <button class="p-2 bg-gray-200 rounded" (click)="changeMonth(1)">
            Mes â€º
          </button>
          <button class="p-2 bg-gray-200 rounded" (click)="changeYear(1)">
            AÃ±o Â»
          </button>
        </div>
      </div>

      <!-- DÃ­as de la semana -->
      <div class="grid grid-cols-7 text-center font-semibold mb-2">
        <div
          *ngFor="let day of ['Dom', 'Lun', 'Mar', 'MiÃ©', 'Jue', 'Vie', 'SÃ¡b']"
        >
          {{ day }}
        </div>
      </div>

      <!-- DÃ­as del mes -->
      <div class="grid grid-cols-7 gap-2">
        <div
          *ngFor="let day of getDaysOfMonth()"
          class="p-2 border rounded cursor-pointer relative hover:bg-gray-100"
          [ngClass]="{
            'bg-blue-100': selectedDate?.toDateString() === day?.toDateString(),
            'bg-gray-50': !day
          }"
          (click)="selectDate(day)"
        >
          {{ day?.getDate() || "" }}
          <span
            *ngIf="hasReservation(day)"
            class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"
          ></span>
        </div>
      </div>
    </div>

    <!-- Formulario nueva reserva -->
    <div class="lg:col-span-1 border rounded-lg p-4 shadow-lg bg-white">
      <h3 class="font-semibold mb-4">Nueva ReservaciÃ³n</h3>
      <div class="space-y-8">
        <div class="flex flex-col">
          <label>Cliente</label>
          <input
            pInputText
            type="text"
            [(ngModel)]="newReservation.customerName"
          />
        </div>

        <p-floatlabel>
          <label>Fecha y Hora</label>
          <input
            type="datetime-local"
            class="p-inputtext w-full"
            [(ngModel)]="newReservation.reservationDate"
          />
        </p-floatlabel>

        <p-floatlabel>
          <label>Invitados</label>
          <p-inputnumber
            [(ngModel)]="newReservation.numberOfPeople"
            [min]="1"
            [max]="12"
            styleClass="w-full"
            class="w-full"
          />
        </p-floatlabel>

        <p-floatlabel>
          <label>Estado</label>
          <p-select
            [options]="statusOptions"
            [(ngModel)]="newReservation.status"
            optionLabel="label"
            optionValue="value"
            placeholder="Selecciona estado"
            class="p-inputtext w-full"
          >
          </p-select>
        </p-floatlabel>

        <p-button
          label="Guardar"
          icon="pi pi-check"
          styleClass="w-full mt-2"
          (click)="addReservation(newReservation)"
        ></p-button>
      </div>
    </div>
  </div>

  <!-- Filtro por rango -->
  <div class="mt-6 border rounded-lg p-4 shadow-lg bg-white">
    <div class="mb-4 flex flex-wrap items-center gap-3">
      <label class="font-medium">Filtrar por rango de fechas:</label>
      <p-datepicker
        [(ngModel)]="startDate"
        (ngModelChange)="filterByDateRange()"
        dateFormat="yy-mm-dd"
        showIcon="true"
      />
      <span>â€”</span>
      <p-datepicker
        [(ngModel)]="endDate"
        (ngModelChange)="filterByDateRange()"
        dateFormat="yy-mm-dd"
        showIcon="true"
      />
      <button
        pButton
        label="Limpiar"
        class="p-button-outlined"
        (click)="clearFilters()"
      ></button>
    </div>

    <p-table
      [value]="filteredReservations"
      class="shadow-lg rounded-lg overflow-hidden"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>#</th>
          <th>Cliente</th>
          <th>Fecha</th>
          <th>Hora</th>
          <th>Invitados</th>
          <th>Estado</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-res>
        <tr>
          <td>{{ res.id }}</td>
          <td>{{ res.customerName }}</td>
          <td>{{ res.reservationDate | date : "shortDate" }}</td>
          <td>{{ res.reservationTime }}</td>
          <td>{{ res.numberOfPeople }}</td>
          <td>
            <span
              [ngClass]="{
                'bg-green-100 text-green-800': res.status === 'CONFIRMED',
                'bg-yellow-100 text-yellow-800': res.status === 'PENDING',
                'bg-red-100 text-red-800': res.status === 'CANCELLED'
              }"
              class="px-2 py-1 rounded-full text-xs font-semibold"
            >
              {{ res.status }}
            </span>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
