<div class="max-w-4xl mx-auto mt-10 px-4 sm:px-6 lg:px-8">
  <div
    *ngIf="loading"
    class="flex flex-col items-center justify-center py-20 text-gray-500"
  >
    <p-progressSpinner></p-progressSpinner>
    <p class="mt-2">Cargando orden...</p>
  </div>

  <p-card
    *ngIf="!loading && order"
    class="shadow-lg hover:shadow-2xl transition-shadow duration-300 rounded-3xl border border-gray-100"
  >
    <div class="flex justify-between items-start mb-4">
      <div>
        <h2 class="text-2xl font-bold text-gray-800 mb-1">
          Orden #{{ order.id }}
        </h2>
        <p-tag
          value="{{ order.typeName }}"
          severity="info"
          class="uppercase text-xs"
        ></p-tag>
        <div class="text-gray-500 text-sm mt-1">
          {{ order.date | date : "fullDate" : "" : "es-PE" }}
        </div>
      </div>
      <div class="flex items-center gap-2">
        <i [ngClass]="getStatusIcon(order.statusName)"></i>
        <p-badge
          [value]="order.statusName"
          [severity]="getStatusColor(order.statusName)"
        ></p-badge>
      </div>
    </div>

    <hr class="border-gray-200 mb-4" />

    <div class="mb-4">
      <h3 class="font-semibold text-gray-700 mb-2">Productos</h3>
      <div class="space-y-2">
        <div
          *ngFor="let item of order.details"
          class="flex justify-between items-center border-b border-gray-100 py-2"
        >
          <div class="flex flex-col">
            <span class="font-medium text-gray-800">{{
              item.productName
            }}</span>
            <span class="text-gray-500 text-sm"
              >Cantidad: {{ item.quantity }} | Precio unitario: S/{{
                item.unitPrice | number : "1.2-2"
              }}</span
            >
          </div>
          <div class="font-semibold text-gray-800">
            S/{{ item.unitPrice * item.quantity | number : "1.2-2" }}
          </div>
        </div>
      </div>
    </div>


    <div class="flex justify-between items-center mb-4">
      <div class="text-gray-600 text-sm">Cliente: {{ order.customerName }}</div>
      <div class="font-bold text-gray-800 text-lg">
        Total: S/{{ order.total | number : "1.2-2" }}
      </div>
    </div>

    <div class="flex justify-end gap-2">
      <p-button
        label="Volver a mis Ã³rdenes"
        icon="pi pi-arrow-left"
        class="p-button-secondary"
        (onClick)="goBack()"
      ></p-button>
      <p-button label="Reordenar" icon="pi pi-refresh"></p-button>
      <p-button
        label="Cancelar"
        icon="pi pi-times"
        *ngIf="order.statusName === 'Pendiente'"
      ></p-button>
    </div>
  </p-card>

  <div *ngIf="!loading && !order" class="text-center py-10 text-red-500">
    No se pudo cargar la orden.
  </div>
</div>
